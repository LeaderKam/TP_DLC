---
- name: installation des serveur
  hosts: localhost
  connection: local
  tasks:
    #Remove docker  https://docs.docker.com/engine/install/ubuntu/
    #SET UP THE REPOSITORY
    
    - name: Uninstall the Docker Engine, CLI, and Containerd packages
      command: sudo apt-get purge docker-ce docker-ce-cli containerd.io
    - name: delete all images, containers, and volumes
      command: sudo rm -rf /var/lib/docker
...
# - name: Run with inline v2 compose
#   hosts: localhost
#   connection: local
#   gather_facts: no
#   tasks:
#      - community.general.docker_compose:
#         # project_name: flask
#         # project_src: ./
#         definition:
#           version: '3.5'
#           services:
#             angular-serv: # The name of the service
#               container_name: angularcontainer  # Container name
#               build: ../front # Location of our Dockerfile
#               volumes: # Volume binding
#                 - '../front:/usr/src/app' 
#               ports: 
#                 - '4200:4200' # Port mapping
#               command: > 
#                 bash -c "npm install && npm start"
#     #   register: output

#     # - ansible.builtin.debug:
#     #     var: output

#     # - ansible.builtin.assert:
#     #     that:
#     #       - "web.flask_web_1.state.running"
#     #       - "db.flask_db_1.state.running"

#front launching
    - name: packages installation
      command: chdir=front/ npm i
    - name: Launching the front
      shell: chdir=front/ npm start
